/**
 *----------------------------------------------
 * Author: lenon
 * Create Time: 2016/3/2 11:06
 * Desc: (这里写描叙)
 * Changed list:
 *        Change author:(若修改请指明修改者)
 *        Change desc:(修改描叙)
 *        Change time:(修改的时间)
 *----------------------------------------------
 **/
var sysConst = require('./../const/sysConst');

var Timer = function(opts){
    this.serverservices = opts.serverservices;
    this.interval = opts.interval || sysConst.DEFAULT_SETTINGS.SERVICES_UPDATE_INTERVAL;
};

module.exports = Timer;

Timer.prototype.run = function () {
    this.interval = setInterval(this.update.bind(this), this.interval);
};

Timer.prototype.close = function () {
    clearInterval(this.interval);
};

Timer.prototype.update = function() {
    this.serverservices.exeFunction(sysConst.SERVICES_BUILT_IN_FUNCTION.UPDATE);
};